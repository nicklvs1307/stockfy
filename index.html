<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Etiquetafy</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Biblioteca QRCode removida conforme solicitado -->
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="logo">
                <img src="assets/images/logo.svg" alt="Etiquetafy Logo" class="logo-img">
                <h2>Etiquetafy</h2>
            </div>
            <nav class="menu">
                <ul>
                    <li class="active" id="nav-inicio"><a href="#"><i class="fas fa-home"></i> Início</a></li>
                    <li id="nav-etiquetas"><a href="#"><i class="fas fa-tag"></i> Etiquetas</a></li>
                    <li id="nav-validades"><a href="#"><i class="fas fa-calendar-alt"></i> Validades</a></li>
                    <li id="nav-producao"><a href="#"><i class="fas fa-box"></i> Produção</a></li>
                    <li id="nav-contagem-estoque"><a href="#"><i class="fas fa-clipboard-list"></i> Contagem de Estoque</a></li>
                    <li id="nav-relatorios"><a href="#"><i class="fas fa-chart-bar"></i> Relatórios</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="main-header">
                <!-- Title removed, will be handled dynamically by JS or within sections -->
                <div></div> <!-- Placeholder for potential future elements like breadcrumbs -->
                <div class="user-info">
                    <span class="user-avatar">D</span> <!-- Placeholder for avatar/initial -->
                    <span id="user-display-name">Don Fonseca</span> <i class="icon-arrow-down"></i>
                    <!-- Add dropdown/logout later -->
                </div>
            </header>

            <!-- Início Section -->
            <section id="inicio-section" class="content-section" style="display: block;">
                <div class="top-cards">
                    <div class="card">
                        <div class="card-icon-large"><i class="fas fa-print"></i></div>
                        <h3>Impressão em grupo</h3>
                        <p>Imprima múltiplos produtos através da funcionalidade de impressão em grupo.</p>
                        <button class="btn btn-primary" id="btn-fazer-impressao">Fazer impressão</button>
                    </div>
                    <div class="card">
                        <div class="card-icon-large"><i class="fas fa-trash-alt"></i></div>
                        <h3>Exclusão de etiquetas</h3>
                        <p>Exclua etiquetas já utilizadas e mantenha o controle de seus produtos.</p>
                        <button class="btn btn-secondary" id="btn-exclusao-etiquetas">Excluir etiquetas</button>
                    </div>
                    <div class="card">
                        <div class="card-icon-large"><i class="fas fa-utensils"></i></div>
                        <h3>Produção de insumos</h3>
                        <p>Acompanhe produtos processados em sua cozinha.</p>
                        <button class="btn btn-secondary" id="btn-ver-producao">Ver produção</button>
                    </div>
                    <div class="card">
                        <div class="card-icon-large"><i class="fas fa-qrcode"></i></div>
                        <h3>Contagem de produtos</h3>
                        <p>Realize a contagem de produtos através da leitura de QR Code.</p>
                        <button class="btn btn-secondary" id="btn-iniciar-contagem-home">Iniciar contagem</button>
                    </div>
                    <div class="card">
                        <div class="card-icon-large"><i class="fas fa-history"></i></div>
                        <h3>Histórico de contagens</h3>
                        <p>Visualize o histórico de contagens realizadas.</p>
                        <button class="btn btn-secondary" id="btn-historico-contagens-home">Ver histórico</button>
                    </div>
                </div>
            </section>

            <!-- Novos Serviços Section (Part of Início) -->
            <section id="novos-servicos-section" class="content-section" style="display: block;">
                <h2>Novos serviços</h2>
                <p>Conheça as novas funcionalidades da Etiquetafy.</p>
                <div class="service-cards">
                    <div class="card horizontal">
                        <div class="card-icon"><img src="assets/images/icon-contagem.png" alt=""></div> <!-- Placeholder Image -->
                        <div class="card-content">
                            <h4>Contagem de produtos</h4>
                            <p>Agora é possível conferir os produtos impressos disponíveis em sua cozinha.</p>
                            <ul>
                                <li>Contagem escaneando QR Code</li>
                                <li>Registros de todas as contagens</li>
                            </ul>
                        </div>
                    </div>
                    <div class="card horizontal">
                        <div class="card-icon"><img src="assets/images/icon-controlados.png" alt=""></div> <!-- Placeholder Image -->
                        <div class="card-content">
                            <h4>Produtos controlados</h4>
                            <p>Agora é possível monitorar todos produtos ativos em nosso sistema.</p>
                            <ul>
                                <li>Contagem (incluso)</li>
                                <li>Controle de produção e insumos</li>
                            </ul>
                        </div>
                    </div>
                    <div class="card horizontal">
                        <div class="card-icon"><img src="assets/images/icon-recebimento.png" alt=""></div> <!-- Placeholder Image -->
                        <div class="card-content">
                            <h4>Recebimento de produtos</h4>
                            <p>Agora é possível fazer o recebimento dos produtos que estão chegando.</p>
                            <ul>
                                <li>Registros de temperaturas</li>
                                <li>Impressão de produtos (insumo)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Selecionar Responsável Section (Etiquetas Flow Step 1) -->
            <section id="selecionar-responsavel-section" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2>Selecionar responsável</h2>
                    <p>Selecione o nome do responsável por essa impressão.</p>
                </div>
                <div class="item-grid" id="responsavel-grid-container">
                    <!-- Responsible person cards will be loaded here by JS -->
                </div>
                <div class="pagination-controls">
                    <button id="voltar-inicio-1" class="btn btn-secondary"> <i class="icon-arrow-left"></i> Voltar</button>
                    <span>1 | 6</span> <!-- Example pagination -->
                </div>
            </section>

            <!-- Selecionar Grupo Section (Etiquetas Flow Step 2) -->
            <section id="selecionar-grupo-section" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2>Selecionar grupo</h2>
                    <p>Selecione o grupo do produto que deseja imprimir.</p>
                    <div class="search-bar">
                        <input type="text" id="search-group-input" placeholder="Buscar produto pelo nome ou marca">
                        <i class="icon-search"></i>
                    </div>
                </div>
                <div class="item-grid" id="grupo-grid-container">
                    <!-- Group cards will be loaded here by JS -->
                </div>
                 <div class="pagination-controls">
                    <button id="voltar-responsavel-btn" class="btn btn-secondary"> <i class="icon-arrow-left"></i> Voltar</button>
                    <span>2 | 6</span> <!-- Example pagination -->
                </div>
            </section>

            <!-- Selecionar Produto Section (Etiquetas Flow Step 3) -->
            <section id="selecionar-produto-section" class="content-section" style="display: none;">
                <div class="section-header with-button">
                    <div>
                        <h2>Selecionar produto</h2>
                        <p>Selecione o produto que deseja imprimir.</p>
                    </div>
                    <button id="imprimir-grupo-btn" class="btn btn-danger"><i class="icon-print"></i> Imprimir grupo</button>
                </div>
                 <div class="search-bar">
                    <input type="text" id="search-product-input" placeholder="Buscar produto pelo nome ou marca">
                    <i class="icon-search"></i>
                </div>
                <div class="item-grid product-grid" id="produto-grid-container">
                    <!-- Product cards will be loaded here by JS -->
                </div>
                 <div class="pagination-controls">
                    <button id="voltar-grupo-btn" class="btn btn-secondary"> <i class="icon-arrow-left"></i> Voltar</button>
                    <span>3 | 6</span> <!-- Example pagination -->
                </div>
            </section>

            <!-- Imprimir Etiqueta Section (Etiquetas Flow Step 4) -->
            <section id="imprimir-etiqueta-section" class="content-section" style="display: none;">
                <div class="imprimir-header">
                     <button id="voltar-produto-btn" class="btn btn-secondary"><i class="icon-arrow-left"></i> Voltar</button>
                     <!-- Title removed, handled by JS -->
                </div>
                <p>Sua etiqueta está pronta para ser impressa, mas se preferir você pode inserir informações adicionais.</p>
                <div class="imprimir-container card">
                    <div class="etiqueta-preview-container">
                        <h4>Pré-visualização</h4>
                        <div class="etiqueta-preview" id="etiqueta-preview-content">
                            <p class="preview-product-name"><strong id="preview-product-name">NOME PRODUTO</strong></p>
                            <p class="preview-status">RESFRIADO</p>
                            <hr class="preview-hr">
                            <div class="preview-dates">
                                <p>MANIPULAÇÃO:</p> <p><span id="preview-manipulacao">--/--/---- - --:--</span></p>
                                <p>VALIDADE:</p> <p><span id="preview-validade">--/--/---- - --:--</span></p>
                            </div>
                            <hr class="preview-hr">
                            <div class="preview-footer">
                                <div class="preview-info">
                                    <p>RESP.: <span id="preview-responsavel">---------</span></p>
                                    <p>CNPJ: <span id="preview-cnpj">37.926.353/0001-55</span></p>
                                    <p>CEP: <span id="preview-cep">37795-000</span> ALTO ALEGRE,</p>
                                    <p>187, ANDRADAS, MG</p>
                                    <p>#<span id="preview-codigo">000000</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="etiqueta-form-container">
                        <h4>Informações adicionais</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="medida-valor">Medida</label>
                                <div class="input-group">
                                    <input type="number" id="medida-valor" name="medida-valor" value="0" class="form-control">
                                    <select id="medida-unidade" name="medida-unidade" class="form-control">
                                        <option value="g" selected>(g)</option>
                                        <option value="kg">(kg)</option>
                                        <option value="ml">(ml)</option>
                                        <option value="l">(l)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="validade-original">Validade original</label>
                                <input type="text" id="validade-original" name="validade-original" placeholder="dd/mm/aa" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="sif">SIF</label>
                                <input type="text" id="sif" name="sif" placeholder="Número do SIF" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="lote">Lote</label>
                                <input type="text" id="lote" name="lote" placeholder="Lote do produto" class="form-control">
                            </div>
                        </div>
                        <div class="form-actions">
                            <div class="quantity-control">
                                <label>Quantidade:</label>
                                <button id="decrease-qty" class="btn btn-secondary">-</button>
                                <input type="number" id="quantity" value="1" min="1" class="form-control quantity-input">
                                <button id="increase-qty" class="btn btn-secondary">+</button>
                            </div>
                            <button id="imprimir-final-btn" class="btn btn-danger">Imprimir</button>
                        </div>
                    </div>
                </div>
                 <div class="pagination-controls">
                    <!-- Voltar button is already inside imprimir-header -->
                    <span>4 | 6</span> <!-- Example pagination -->
                </div>
            </section>

            <!-- Monitoria de Validades Section -->
            <section id="monitoria-validades-section" class="content-section" style="display: none;">
                 <div class="section-header with-button">
                    <div>
                        <h2>Monitoria de validades</h2>
                        <p>Selecione um período de validade.</p>
                    </div>
                    <div>
                        <button class="btn btn-secondary" id="btn-filtros-validade"><i class="icon-filter"></i> Filtros</button>
                        <button class="btn btn-danger" id="btn-excluir-etiquetas-validade"><i class="icon-tag-off"></i> Excluir etiquetas</button>
                    </div>
                 </div>
                 <div class="info-banner" style="display: none;"> <!-- Optional: For messages like 'Por que está indisponível?' -->
                    <i class="icon-info"></i> <span>A funcionalidade de exclusão está temporariamente indisponível.</span>
                 </div>
                 <div class="validade-summary-cards">
                    <div class="card validade-card">
                        <p>Ontem</p>
                        <span class="count">28</span> <span class="label">Etiquetas</span>
                        <span class="date-tag red">24/04/25</span>
                    </div>
                     <div class="card validade-card">
                        <p>Hoje</p>
                        <span class="count">3</span> <span class="label">Etiquetas</span>
                        <span class="date-tag orange">25/04/25</span>
                    </div>
                     <div class="card validade-card">
                        <p>Amanhã</p>
                        <span class="count">9</span> <span class="label">Etiquetas</span>
                        <span class="date-tag green">26/04/25</span>
                    </div>
                 </div>
                 <!-- Add table or list for detailed validity items later -->
            </section>

            <!-- Placeholder Sections for Produção and Relatórios -->
            <section id="etiquetas-section" class="content-section" style="display: none;">
                <div class="section-header with-button">
                    <div>
                        <h2>Etiquetas</h2>
                        <p>Gerencie e imprima etiquetas aqui.</p>
                    </div>
                    <div>
                        <button id="btn-iniciar-contagem" class="btn btn-secondary"><i class="fas fa-qrcode"></i> Contagem por QR Code</button>
                        <button id="btn-historico-contagens" class="btn btn-secondary"><i class="fas fa-history"></i> Histórico de Contagens</button>
                    </div>
                </div>
                <div class="etiquetas-container">
                    <p>Selecione uma opção no menu lateral para iniciar a impressão de etiquetas ou use os botões acima para gerenciar contagens.</p>
                </div>
            </section>
            <!-- Monitoria de Validades Section -->
            <section id="monitoria-validades-section" class="content-section" style="display: none;">
                 <div class="section-header with-button">
                    <div>
                        <h2>Monitoria de validades</h2>
                        <p>Selecione um período de validade.</p>
                    </div>
                    <div>
                        <button class="btn btn-secondary" id="btn-filtros-validade"><i class="icon-filter"></i> Filtros</button>
                        <button class="btn btn-danger" id="btn-excluir-etiquetas-validade"><i class="icon-tag-off"></i> Excluir etiquetas</button>
                    </div>
                 </div>
                 <div class="info-banner" style="display: none;"> <!-- Optional: For messages like 'Por que está indisponível?' -->
                    <i class="icon-info"></i> <span>A funcionalidade de exclusão está temporariamente indisponível.</span>
                 </div>
                 <div class="validade-summary-cards">
                    <div class="card validade-card">
                        <p>Ontem</p>
                        <span class="count">28</span> <span class="label">Etiquetas</span>
                        <span class="date-tag red">24/04/25</span>
                    </div>
                     <div class="card validade-card">
                        <p>Hoje</p>
                        <span class="count">3</span> <span class="label">Etiquetas</span>
                        <span class="date-tag orange">25/04/25</span>
                    </div>
                     <div class="card validade-card">
                        <p>Amanhã</p>
                        <span class="count">9</span> <span class="label">Etiquetas</span>
                        <span class="date-tag green">26/04/25</span>
                    </div>
                 </div>
                 <!-- Add table or list for detailed validity items later -->
            </section>

            <!-- Placeholder Sections for Produção and Relatórios -->
            <section id="producao-section" class="content-section" style="display: none;">
                <div class="section-header with-button">
                    <div>
                        <h2>Produção</h2>
                        <p>Gerencie os registros de produção de insumos.</p>
                    </div>
                    <button id="btn-nova-producao" class="btn btn-primary"><i class="fas fa-plus"></i> Nova Produção</button>
                </div>
                
                <div class="filter-container">
                    <div class="form-group">
                        <label for="producao-data-inicio">Data Início</label>
                        <input type="date" id="producao-data-inicio" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="producao-data-fim">Data Fim</label>
                        <input type="date" id="producao-data-fim" class="form-control">
                    </div>
                    <button id="btn-filtrar-producao" class="btn btn-secondary">Filtrar</button>
                </div>
                
                <div class="table-container">
                    <table class="table" id="producao-table">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>Quantidade</th>
                                <th>Data</th>
                                <th>Responsável</th>
                                <th>Observação</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dados serão carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
            <!-- Contagem de Estoque Section -->
            <section id="contagem-estoque-section" class="content-section" style="display: none;">
                <div class="section-header with-button">
                    <div>
                        <h2>Contagem de Estoque</h2>
                        <p>Realize a contagem de todos os produtos do estoque.</p>
                    </div>
                    <div>
                        <button id="btn-iniciar-contagem" class="btn btn-secondary"><i class="fas fa-qrcode"></i> Contagem por QR Code</button>
                        <button id="btn-historico-contagens" class="btn btn-secondary"><i class="fas fa-history"></i> Histórico de Contagens</button>
                    </div>
                </div>
                
                <div id="produtos-contagem-lista" class="table-container">
                    <!-- Produtos serão carregados aqui via JavaScript -->
                </div>
                
                <div class="fixed-bottom-container">
                    <button id="btn-salvar-contagem-lista" class="btn btn-primary"><i class="fas fa-save"></i> Salvar Contagem</button>
                </div>
            </section>

            <section id="relatorios-section" class="content-section" style="display: none;">
                <div class="section-header">
                    <div>
                        <h2>Relatórios</h2>
                        <p>Visualize relatórios de impressões de etiquetas.</p>
                    </div>
                </div>
                
                <div class="filter-container">
                    <div class="form-group">
                        <label for="relatorio-data-inicio">Data Início</label>
                        <input type="date" id="relatorio-data-inicio">
                    </div>
                    <div class="form-group">
                        <label for="relatorio-data-fim">Data Fim</label>
                        <input type="date" id="relatorio-data-fim">
                    </div>
                    <div class="form-group">
                        <label for="relatorio-funcionario">Funcionário</label>
                        <select id="relatorio-funcionario">
                            <option value="">Todos</option>
                            <!-- Opções serão carregadas via JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="relatorio-tipo">Tipo de Relatório</label>
                        <select id="relatorio-tipo">
                            <option value="etiquetas">Etiquetas</option>
                            <option value="producao">Produção</option>
                            <option value="contagem">Contagem de Estoque</option>
                        </select>
                    </div>
                    <button id="btn-gerar-relatorio" class="btn btn-primary">Gerar Relatório</button>
                </div>
                
                <div class="report-container">
                    <div class="report-summary">
                        <div class="summary-card">
                            <h3>Total de Etiquetas</h3>
                            <p class="summary-value" id="total-etiquetas">0</p>
                        </div>
                        <div class="summary-card">
                            <h3>Produtos Diferentes</h3>
                            <p class="summary-value" id="total-produtos">0</p>
                        </div>
                        <div class="summary-card">
                            <h3>Funcionários Envolvidos</h3>
                            <p class="summary-value" id="total-funcionarios">0</p>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table class="table" id="relatorio-table">
                            <thead>
                                <tr>
                                    <!-- Cabeçalhos serão gerados dinamicamente -->
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados serão carregados via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Product Management Section (Could be a separate page or modal later) -->
            <!-- Removed for now to focus on the main flow -->

            <!-- Removed original ZPL Generator Section -->

            <footer class="main-footer">
                <p>Copyright © Etiquetafy 2025. Todos os direitos reservados.</p>
                <p>Made with ❤️ by Etiquetafy</p>
            </footer>
        </main>
    </div>

    <!-- Scripts do sistema de etiquetas -->
    <script src="js/qrcode-generator.js"></script>
    <script src="js/zebra-printer.js"></script>
    <script src="js/etiqueta-manager.js"></script>
    <script src="js/contagem-estoque.js"></script>
    <script src="js/producao.js"></script>
    <script src="js/relatorios.js"></script>
    <script src="js/script.js"></script>
    <!-- Scripts -->
    <script src="js/filtro-etiquetas-novo.js"></script>
    <script src="js/grupo-impressao.js"></script>
    <script src="js/etiquetas-tabela.js"></script>
    
    <style>
        /* Styles for the fixed bottom container */
        .fixed-bottom-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #fff;
            padding: 15px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            z-index: 100;
            margin-left: 250px; /* Match sidebar width */
        }
        
        /* Add padding to the bottom of the content to prevent overlap with fixed button */
        #contagem-estoque-section {
            padding-bottom: 70px;
        }
        
        /* Highlight style for counted items */
        tr[data-produto-id].highlighted {
            background-color: #E8F5E9 !important;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .fixed-bottom-container {
                margin-left: 0;
            }
        }
    </style>
</body>
</html>